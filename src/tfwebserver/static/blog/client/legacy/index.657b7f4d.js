import{a as t,b as n,c as e,d as a,e as o,f as s,i as r,s as c,g as i,S as u,h as p,v as l,j as f,k as h,w as m,l as g,m as d,n as v,o as b,O as y,z as _,t as k,T as $,u as P,A as w,L as x,M as j,B as L,C as N,p as R,I,J as C,K as D,N as E}from"./client.9bb3e675.js";import{a as S,b as q}from"./_api.3203907b.js";import"./showdown.f91d7298.js";import{L as B}from"./ListPagination.c49df170.js";import{P as J}from"./PostList.f02315e9.js";function O(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var e,s=a(t);if(n){var r=a(this).constructor;e=Reflect.construct(s,arguments,r)}else e=s.apply(this,arguments);return o(this,e)}}function T(t){var n,e;return{c:function(){n=p("script"),e=l('cookieconsent.run({\n        notice_banner_type: "headline",\n        consent_type: "express",\n        palette: "light",\n        language: "en",\n        website_name: "https://blog.threefold.io/",\n        cookies_policy_url: "https://wiki.threefold.io/#/privacypolicy"\n      });'),this.h()},l:function(t){n=f(t,"SCRIPT",{type:!0});var a=h(n);e=m(a,'cookieconsent.run({\n        notice_banner_type: "headline",\n        consent_type: "express",\n        palette: "light",\n        language: "en",\n        website_name: "https://blog.threefold.io/",\n        cookies_policy_url: "https://wiki.threefold.io/#/privacypolicy"\n      });'),a.forEach(g),this.h()},h:function(){d(n,"type","text/javascript")},m:function(t,a){v(t,n,a),b(n,e)},d:function(t){t&&g(n)}}}function V(t){return{c:R,l:R,m:R,p:R,i:R,o:R,d:R}}function z(t){var n,e,a,o,s=new J({props:{posts:t[10],username:t[3]}}),r=new B({props:{articlesCount:t[2],articlesPerPage:t[1].posts_per_page,objectPath:"/blog/"+t[3]+"/posts",page:t[4]}});return{c:function(){n=p("div"),I(s.$$.fragment),e=k(),a=p("div"),I(r.$$.fragment),this.h()},l:function(t){n=f(t,"DIV",{class:!0});var o=h(n);C(s.$$.fragment,o),o.forEach(g),e=P(t),a=f(t,"DIV",{class:!0});var c=h(a);C(r.$$.fragment,c),c.forEach(g),this.h()},h:function(){d(n,"class","row"),d(a,"class","row")},m:function(t,c){v(t,n,c),D(s,n,null),v(t,e,c),v(t,a,c),D(r,a,null),o=!0},p:function(t,n){var e={};1&n&&(e.posts=t[10]),8&n&&(e.username=t[3]),s.$set(e);var a={};4&n&&(a.articlesCount=t[2]),2&n&&(a.articlesPerPage=t[1].posts_per_page),8&n&&(a.objectPath="/blog/"+t[3]+"/posts"),16&n&&(a.page=t[4]),r.$set(a)},i:function(t){o||(x(s.$$.fragment,t),x(r.$$.fragment,t),o=!0)},o:function(t){j(s.$$.fragment,t),j(r.$$.fragment,t),o=!1},d:function(t){t&&g(n),E(s),t&&g(e),t&&g(a),E(r)}}}function A(t){return{c:R,l:R,m:R,p:R,i:R,o:R,d:R}}function K(t){var n,e,a,o,s,r=t[1].cookie_consent_popup&&T(),c={ctx:t,current:null,token:null,pending:A,then:z,catch:V,value:10,blocks:[,,,]};return y(o=t[0],c),{c:function(){r&&r.c(),n=_(),e=k(),a=_(),c.block.c(),this.h()},l:function(t){var o=$('[data-svelte="svelte-144l6me"]',document.head);r&&r.l(o),n=_(),o.forEach(g),e=P(t),a=_(),c.block.l(t),this.h()},h:function(){document.title="Blog"},m:function(t,o){r&&r.m(document.head,null),b(document.head,n),v(t,e,o),v(t,a,o),c.block.m(t,c.anchor=o),c.mount=function(){return a.parentNode},c.anchor=a,s=!0},p:function(e,a){var s=w(a,1)[0];if((t=e)[1].cookie_consent_popup?r||((r=T()).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),c.ctx=t,1&s&&o!==(o=t[0])&&y(o,c));else{var i=t.slice();i[10]=c.resolved,c.block.p(i,s)}},i:function(t){s||(x(c.block),s=!0)},o:function(t){for(var n=0;n<3;n+=1){var e=c.blocks[n];j(e)}s=!1},d:function(t){r&&r.d(t),g(n),t&&g(e),t&&g(a),c.block.d(t),c.token=null,c=null}}}function M(t){return F.apply(this,arguments)}function F(){return(F=t(n.mark(function t(e){var a,o,s,r,c,i,u,p,l,f,h;return n.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.host,a=e.path,o=e.params,s=e.query,console.log("params in posts index",JSON.stringify(o)),(r=parseInt(s.page))||this.redirect(302,"".concat(o.theuser,"/posts?page=1")),t.next=6,q(o.theuser);case 6:return c=t.sent,r>0&&r--,console.log(c.length),i=c.length,t.next=12,S(o.theuser);case 12:return u=t.sent,p=u.posts_per_page||5,l=r*p,f=r*p+p,h=c.slice(l,f),t.abrupt("return",{path:a,posts:h,totalPostsLength:i,metadata:u});case 18:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function G(t,n,e){var a,o=n.posts,s=void 0===o?[]:o,r=n.metadata,c=n.totalPostsLength,i=n.path,u=L(),p=(u.preloading,u.page);u.session;N(t,p,function(t){return e(7,a=t)}),console.log("in posts index",a.params);var l=n.username,f=void 0===l?a.params.theuser:l,h=n.pageNum,m=void 0===h?a.query.page:h;return t.$set=function(t){"posts"in t&&e(0,s=t.posts),"metadata"in t&&e(1,r=t.metadata),"totalPostsLength"in t&&e(2,c=t.totalPostsLength),"path"in t&&e(6,i=t.path),"username"in t&&e(3,f=t.username),"pageNum"in t&&e(4,m=t.pageNum)},[s,r,c,f,m,p,i]}export default(function(t){e(a,u);var n=O(a);function a(t){var e;return s(this,a),e=n.call(this),r(i(e),t,G,K,c,{posts:0,metadata:1,totalPostsLength:2,path:6,username:3,pageNum:4}),e}return a}());export{M as preload};
